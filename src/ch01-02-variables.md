# 변수

프로그래밍은 변수에서 시작해서 변수에서 끝난다고 볼 수 있습니다. 무척이나 기본적인 만큼 무심코 넘어가기 쉽지만, 변수를 쓰면서 실수하지 않도록 하는 것은 중요합니다.

## 잘못된 변수 사용을 찾자.

변수 사용에서의 실수에는 몇 가지 유형이 있습니다.

- 초기화되지 않은 변수
- 부적절한 변수
- 재정의된 변수
- 의도와는 다른 전역변수 및 지역변수 사용

### 초기화: 10억짜리 실수

변수의 초기화는 중요합니다. 이 주제에 대해 논의하자면 사실 하나의 챕터로 부족할지도 모릅니다. 다시 한 번 말씀드리지만 변수의 초기화는 중요합니다. 

대체로 `Python` 코드에서는 이 유형의 실수가 적은데, **문법적으로 초기화되지 않은 변수 선언이 불가능하기 때문**입니다. `Java` 또한 컴파일러가 초기화되지 않은 변수의 사용을 일부 잡아줍니다. 반면 `C\C++` 코드에서는 이 실수가 자주 보이는데, 무심코 변수가 0으로 초기화된 것처럼 접근하다 문제가 발생하게 됩니다.

초기화되지 않은 변수는 쓰레기 값이 들어있어 예측하기 힘든 결과를 내놓기 때문에, 이를 알아차리기 어렵습니다.

- 단순 오답: 값이 단지 잘못되었거나
- 시간 초과:  while 문 등에서 i--를 썼는데 애초에 음수였거나
- 메모리 초과: 재귀 함수나 반복문을 탈출하지 못해 너무 많이 할당되거나
- OutOfIndex: 너무 먼 위치를 찾아가거나
- Seg Fault: 전혀 예상하지 위치에 접근하거나

이 경우, 로컬 환경에서는 아무 문제 없이 돌아갈 때가 많아서 더욱 찾기 힘들 수 있습니다. 전역 변수는 0으로 초기화되는 반면 **지역변수나 동적 할당되는 변수는 초기화되지 않는다**는 특징 때문에 더 헷갈리기도 합니다.

이 실수에 대처하는 방법은 의외로 무척 쉬운데, 코드를 천천히 읽는 것입니다. 또 하나는 습관적으로 변수를 초기화하는 것입니다.

> 초기화 되지 않은 변수와 10억 달러짜리 실수는 사실 조금 결이 다른 이야기입니다. Null의 개념과 이에 얽힌 논의는 여기 담기에는 부적절하다 생각해서 넣지 않았습니다. 

### 부적절한 변수 사용: 다이아몬드와 옥수수

이젠 철 지난 밈이 되긴 했지만, 문명의 간디만큼 오버플로우를 설명하기에 좋은 얘시는 없는 것 같습니다.

`int`형이 몇 비트인지 물어보면 대부분은 어렵지 않게 대답할 것입니다. 그럼 `int`형으로 표현할 수 있는 숫자 범위를 10진법으로 표현하면 몇 자리일까요. 이것 또한 제대로 대답하는 사람들이 많을 겁니다. 하지만 늘 실수는 알아차리기 힘든 형태로 숨어있습니다.

```cpp
int left = 0, right = 2'000'000'000;
while (left < right) {
    int mid = (left + right) / 2;
    if (check(mid)) {
        right = mid;
    } else {
        left = mid + 1;
    }
}
```

이 코드는 기초 알고리즘 중 하나인 매개변수탐색(이분탐색)코드 중 일부입니다. 그리고 이 코드에는 부적절한 자료형이 쓰여 있습니다. 잠깐 멈추고 어디인지 찾아보세요.

만약 `check`가 처음에 조건을 만족하지 않는다면 `left`는 1,000,000,000이 됩니다. 그 다음 탐색에서 `left + right`가 순간적으로 `int` 최댓값을 넘어갑니다. 자료형의 크기가 부족한 것이죠.

크기가 큰 자료형을 쓰는 것으로 이런 유형의 문제를 해겷할 수 있습니다. 표현 범위가 큰 `long long`이나 오차가 더 적은 `long double`형을 쓰는 것은 코딩테스트에서 시간초과를 낼 만큼 큰 문제가 되지 않습니다.

### 재정의된 변수 사용: 그림자 분신술

분명 코드의 모든 흐름이 잘 돌아가는 것 같은데, 이상하게 어떤 변수는 값이 변하지 않을 때가 있습니다. 다시 찾아보면 같은 이름의 변수를 다시 만들어 쓰면서, 그 변수의 값을 바꾸고 있을 때가 있습니다. 이를 shadowing이라 하는데, 가독성 높은 코드를 작성하게 해주는 유용한 도구인 동시에 코드를 정말 귀신이 곡할 노릇으로 만들어버리기도 합니다.

```java
int c = 0;

while (c < 100) {
    //...
    int a = 0, b = 0, c; // 분신술!
    // ...
    c = d;
}

cout << c;
```

저런 분신이 100줄 쯤 되는 코드 사이 어딘가 숨어서 우리를 괴롭힐 수 있습니다.